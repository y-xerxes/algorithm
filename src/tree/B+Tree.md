# B+Tree
B+Tree是在B-Tree基础上的一种优化，使其更适合实现外存储索引结构。
**B+Tree索引并不能找到一个给定键值的具体行，B+Tree能找到的是被查找的键值所在行的页，然后数据库把页读到内存，在内存中查找数据**。
**Mysql设计利用了磁盘预读原理，将一个B+Tree节点大小设为一个页大小**，在新建节点时直接申请一个页的空间，这样就能保证一个节点物理上存储在一个页里，加之计算机存储分配都是按页对齐的，这样就实现了每个Node节点只需要一次I/O操作。
B+Tree和B-Tree的区别：
- 非叶子节点只存储键值信息
- B+树的每个数据页（叶子节点）是通过一个双向链表进行链接，数据页上的数据的顺序是按照主键顺序存储的
- 数据记录都存放在叶子节点中
- 非叶子结点的子树指针与关键字个数相同
![](/Users/xerxes/Development/algorithm/resources/B+Tree.jpg)

数据库中的B+Tree索引可以分为**聚集索引**和**辅助索引**。聚集索引的B+Tree中的叶子节点存放的是整张表的行记录数据。辅助索引与聚集索引的区别在于辅助索引的叶子节点并不包含行记录的全部数据，而是存储相应行数据的聚集索引键，即主键。
## 查找
B+Tree使用二分法查找。
## 插入
B+Tree查找速度很快，但是维护成本高，通常需要1次或者多次左旋右旋来保证插入后树的平衡性。
B+Tree的插入为了保证树的平衡，需要做大量页（叶子节点）的拆分，页的存储基本都在磁盘，页的拆分意味着磁盘操作。
![](/Users/xerxes/Development/algorithm/resources/B+%E6%A0%91%20%E6%8F%92%E5%85%A5%E7%9A%84%E4%B8%89%E7%A7%8D%E6%83%85%E5%86%B5.jpg)